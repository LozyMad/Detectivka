#!/bin/bash

echo "========================================"
echo "   ВОССТАНОВЛЕНИЕ СЕЙВ-ТОЧКИ v1.0"
echo "========================================"
echo ""
echo "Этот скрипт вернет проект к рабочему состоянию"
echo "с ядерным сбросом и всеми функциями."
echo ""
read -p "Нажмите Enter для продолжения..."

echo ""
echo "[1/3] Переключение на сейв-точку..."
git checkout v1.0-working-nuclear-reset
if [ $? -ne 0 ]; then
    echo "ОШИБКА: Не удалось переключиться на тег!"
    echo "Убедитесь что тег v1.0-working-nuclear-reset существует."
    exit 1
fi

echo ""
echo "[2/3] Установка зависимостей..."
npm install
if [ $? -ne 0 ]; then
    echo "ОШИБКА: Не удалось установить зависимости!"
    exit 1
fi

echo ""
echo "[3/3] Отправка на сервер..."
git push origin main --force
if [ $? -ne 0 ]; then
    echo "ОШИБКА: Не удалось отправить на сервер!"
    exit 1
fi

echo ""
echo "========================================"
echo "   ВОССТАНОВЛЕНИЕ ЗАВЕРШЕНО!"
echo "========================================"
echo ""
echo "✅ Проект восстановлен к рабочему состоянию"
echo "✅ Все функции работают"
echo "✅ Ядерный сброс доступен в админ-панели"
echo ""
echo "Данные для входа:"
echo "Логин: admin"
echo "Пароль: admin123"
echo ""
echo "Подождите 2-3 минуты для обновления на сервере."
echo ""
read -p "Нажмите Enter для выхода..."
